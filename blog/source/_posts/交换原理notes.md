---
title: 交换原理笔记
date: 2023-02-22 9:50:56
categories:
	- 笔记
		- 交换原理
tags:
	- course
	- 交换原理

cover: /img/Photo frame three-105065589.png
---

开个坑，期末复习用。
ICT:Information Communication Technology,是IT和CT的融合

## chapter0-交换通识概论

停电了电话还能打：电话通过双绞线连到供电局，是由供电局来供电的。

通信网的三要素：

- 交换设备
- 传输设备
  - 用户与交换机之间的线叫用户线
  - 交换机与交换机之间的线叫中继线（Trunk）
- 用户终端设备
无线通信：
手机和基站是无线的，基站和基站之间还是有线的。
PSTN:public switching telephone network

通信网的分层：（从上到下）

- 应用层
- 业务层：里面有很多业务网，比如PSTN,ISDN,OSODN,IN,IP,移动通信网（3G,4G等）
- 传送层
  - 接入网：接入的是用户网CPE、CPN，相当于高速匝道，2000年左右“打通最后一公里”
  - 骨干传送网：光纤啦啥的，物理层的，相当于高速车道
- 还有一个支撑网，不属于任何一层，包括信令网，电信管理网，数字同步网，有点像CPU里面的控制部件。

![通信网的分层]()

接入网 的ways：
ADSL：亚洲用的多，A是非对称的，下行的速率大，一个小盒子，叫ADSL猫，装完之后就可以同时走电话（300~3400hz）和网络（4k以上，分为上行和下行）。现在换成光纤了，叫光猫。
HDSL:high speed DSL,北美用的多，可以达到1.5M，但不能同时传话音和数据
LAN：局域网，共享的，会分流量。
HTTH：光纤到用户，日本是这么干的，因为日本在2000年的时候有钱&国土小。

无线接入技术：
![1](https://api2.mubu.com/v3/document_image/1677035084713429c.jpg)
WWAN是广域网，已经不属于接入网了，3G,4G都属于这个范畴。

业务网：

- 电话通信网 PSTN
- 分组交换网 X.25 ，分组交换，支持两种方式，数据报和虚电路，ITU-T国际电信联盟推出的，是全球化的标准。
- 综合业务数字网 N-ISDN 窄带的
- 帧中继网 FRN
- 数字数据网 DDN
- IN 智能网
- 综合业务数字网 B-ISDN，宽带的
- 下一代网络 NGN
- 移动互联网
- 物联网 IOT Internet of things，信息传感器

![业务网]()

Q:电路交换跟分组交换和帧交换的区别？
Q:数据报和虚电路的区别？
Q:电信网和计算机网？
另：业务网ppt的交换方式列 电路交换&分组交换应下移一行

通信的基本问题：

1. 用什么信息格式传递给对方？编码
2. 如何找到对方？寻址
3. 信息传递的额外要求：网络结构、带宽、复用、连接方式、security、QoS（巴普特的是连到西直门电话局）

==通信的三对基本概念==：

- 信息传送的方式
  - 面向连接:连接建立——信息传送——连接释放  公交车/专线
  - 无连接：边寻址边传递讯息  自行车春游
- 时分复用（另一种复用是频分复用）
  - 同步时分复用
    - 固定带宽分配
    - 位置化信道：依据信号在时间轴上的位置来区分每一路信号（逻辑信道），无信息传送时也占用信道。
    - 每帧定长、子信道信息流速率恒定。
  - 异步时分复用（统计时分复用）
    - 按需分配，提高了利用率
    - （动态带宽分配）
    - **标志化信道**：标志码表示哪路信息。
    - 分组长度可变或不可变，分组头用于定界。
    - 统计复用提高信道利用率。
- 带宽分配
  类比：交通车道
  - 固定带宽分配，2G，信道是固定的
  - 动态带宽分配，4G，按需分配信道

### Word

```rust
time slot TS 时隙
PTM
ATM
CTM
```

## chapter1-交换概率

### 交换方式

![1](https://api2.mubu.com/v3/document_image/863568db-f74a-4d4f-9bb1-becb15df791e-16175743.jpg)

### CTM PTM 的比较

- 对信息的损伤方面
  - 电路交换——时间透明性好，延迟小
  - 分组交换——语义透明性好，错误少
- 支持多种业务方面
  - 分组交换有更大的灵活性，可实现多速率交换，并允许多种业务共享网络资源
- 交换速率
  - 电路交换可达到高速率的交换（硬件）
  - 分组交换的交换速率受到了限制（软件要看包头）
- 设备的复杂性
  - 分组交换需要复杂的队列管理机制
  - 电路交换需要复杂的路由选择算法

### 电路交换

电话通信中信息的传送方式：**公共交换电话网（Public Switched Telephone Network，PSTN）**，每一路能提供 64k 速率。（恒定速率）

- 特点
  - 信息传送的最小单位是**时隙**：每个时隙采样 8bit，采样率 8kHz，每路通信速率 64kbps。
  - 面向连接的工作方式（物理连接）
  - 同步时分复用（固定带宽分配）![1](https://api2.mubu.com/v3/document_image/b37d8e73-8df4-441b-9cd8-4e9674ef2d02-16175743.jpg)
  - 无差错控制机制
  - 对通信信息不做处理（透明传输）
  - 流量控制基于呼叫损失制

适合 实时的、恒定速率的话音业务

### 多速率电路交换

讲几个基本信道速率捆绑起来，构成一个速率更高的信道，即确定基本信道速率，按需形成其他速率，且其他速率是基本速率的<u>整数倍</u>

关键问题：

1. 确定基本速率
2. 保证时隙顺序完整性（TSSI）

特点：软件实现，控制软件复杂

### 分组交换

思想来源于报文交换，本质都是**存储——转发**
所不同的是分组交换的最小信息单位是分组,而报文交换则是一个个报文。由于**以较小的分组为单位进行传输和交换**,所以分组交换比报文交换快。报文交换主要应用于公用电报网中。
![2](https://api2.mubu.com/v3/document_image/6c02d35b-2f43-486d-8160-b67ce8d0f736-16175743.jpg)

分组交换的特点

- 信息传送的最小单位是分组：由分组头、用户信息构成，分组头含有选路和控制信息。
- 面向连接（虚电路）方式和无连接（数据报）方式。
- 统计时分复用，动态分配带宽。
- 有**差错控制**机制：CRC 校验、重发等（设于第二层和第三层协议中）。
- 信息传送不具有透明性：对通信信息作处理，如拆分、重组等。
- 流量控制基于呼叫延迟制。

|            | 虚电路             | 数据报                 |
| ---------- | ------------------ | ---------------------- |
| 分组头     | 简单（逻辑信道号） | 复杂（详细的选路信息） |
| 选路       | 虚连接表           | 每个分组独立选路       |
| 分组顺序   | 有序               | 可能失序               |
| 故障敏感性 | 敏感               | 可靠性高               |
| 应用       | 连续数据流         | 询问/响应              |


分组交换的两种方式

- 虚电路VC
  - 面向连接的OC，先建立（逻辑）连接，再传输
  - 虚连接也称为虚电路,即**逻辑连接**,它不同于电路交换中实际的物理连接,而是通过通信连接上的所有交换节点保存选路结果和路由连接关系来实现连接,因此是逻辑的连接。
  - 不会失序，适用于连续的数据流
  - 一旦建立的连接出现故障,信息传送就要中断,必须重新建立连接,因此对**故障敏感**。
- 数据报DG
  - 无连接CL，一边传送一边选路
  - 典型应用是IP网络
  - 统计时分复用（动态带宽分配）

![3](https://api2.mubu.com/v3/document_image/2edf2029-3eb0-40e0-a8c0-ae1d09dae490-16175743.jpg)

适用于可靠性要求高、突发（burst）、可变速率的数据业务。


### 帧中继

![3](https://api2.mubu.com/v3/document_image/ec192c57-9db5-44a3-96c7-fb5ac04b1c91-16175743.jpg)

### ATM交换

特点

- 传输的最小单位是cell（信元），固定长度是53byte，前5byte是信头（简化的），其余48byte是payload
- 采用了异步时分复用方式（动态分配带宽）
- 面向连接的工作方式，逻辑连接，用VPI,VCI来表示信道

### 交换系统

交换系统的基本结构
交换网络是第二章的核心，又叫交换矩阵。
![4](https://api2.mubu.com/v3/document_image/30e7d70c-e397-409b-84a6-7c425d92b45b-16175743.jpg)

- 信息传送子系统：
  - 交换网络：完成交换，实现任意出线与入线的互联。
  - 各种接口：分为用户接口和中继接口，用途是进行信号转换。
- 控制子系统：由处理机系统构成，是交换系统的“指挥中心”。

## chapter2-交换网络

这一章是考试的重点，期末大概占40%。

### 交换网络的构成

交换网络是由若干个交换单元按照一定的拓扑结构和控制方式构成的网络。交换网络的三个基本要素是：**交换单元、不同交换单元间的拓扑结构和控制方式**。
==交换单元是构成交换网络的最基本的部件。==

### 交换单元

SE :switch element
==交换单元是构成交换网络的最基本的部件。==

![5](https://api2.mubu.com/v3/document_image/8f4e6c27-5974-4165-bfd9-d49918c69a96-16175743.jpg)
$M \times N$:容量，M条入线，N条出线

#### 交换单元的分类

- 入线和出线信息传送方向 ![2](https://api2.mubu.com/v3/document_image/f8f40cac-9aa7-4a5a-8407-d007be57a709-16175743.jpg)
  <mark>关于K$\times $L ：</mark>从K个进入，只能从L个出来；而从L进入，只能从K个出来；并不是全联通的，要与N$\times $N区分开来。
- 入线和出线的数量关系 ![3](https://api2.mubu.com/v3/document_image/5dd6e0be-7af0-4fab-a4be-aabf980f6244-16175743.jpg)
- 时分与空分(按照入线和出线之间是否共享单一通路) ![4](https://api2.mubu.com/v3/document_image/450d9921-ecbe-4b6b-ae9a-41379be92035-16175743.jpg)
- 按照交换单元所接收的信号
  - 模拟交换单元（现在已经不用了）
  - 数字交换单元
- 全联通与部分联通交换单元

#### 交换单元的基本特性

##### 交换单元的连接特性

- 交换单元连接特性的描述方式：
  - 集合描述方式
  - 函数描述方式（排列、图形、二进制函数）
- 常见的连接方式：
  - 直接连接
  - 交叉连接
  - 蝶式连接
  - 均匀洗牌连接
  - 间隔交叉连接

##### 交换单元的性能

- 容量：
  交换单元所有入线可以同时送入的总的信息量
- 接口：
  交换单元需要规定自己的信号接口标准，即信号形式、速率及信息流方向
- 功能：
  点到点、点到多点
- 质量：
  完成交换动作的速度、任何情况下是否能完成指定连接、信息经过交换单元是否有损伤(时间、语义)

##### 连接、连接方式

连接

- 集合描述法
- 函数描述法

连接方式

>直线连接
交叉连接（交换置换）
蝶式连接
均匀洗牌置换
间隔交叉连接（方体置换）

#### 开关阵列

在每条入线和每条出线直接都各自接上一个开关，构成开关阵列。

- 开关的位置：入、出线交叉点
- 开关的表示：$K_{ij}$（i 为入线，j 为出线）
- 开关的状态：通、断
- 开关的种类：单向、双向

实现：全连通交换单元、部分连通交换单元、多路选择器……

>开关阵列的特性：
可以很容易的实现点到多点的传输，也就是说容易实现广播功能
开关阵列的时延，从（每路）入线到出线延迟时间均等
控制信加暗淡
交换单元性能依赖于所使用的开关（电子的快，机械的慢）
适用于构成较小的交换单元（开关num反应实现复杂度和成本高低）

实际使用的开关阵列

1. 继电器
2. 模拟电子开关
3. 数字电子开关

#### 空间（空分）交换单元

也叫**空间接线器（Space Switch）**，简称 **S 单元**或 **S 接线器** 。 用来完成多个输入服用先与多个输出复用线之间的空间交换，而不改变其时隙位置。

>每条线都是PCM，开关阵列不一定是PCM，但是S接线器是一定是PCM，也就是每一路上面有很多个时隙（老师举例子是32
路PCM）。专为话音通信设计的。
特别的，S接线器，入线和出线的数目都是相等的，而且每条线的（whatever 入还是出）传输速率都是一样样的。

- 构成：
  - 交叉点矩阵（开关阵列）
  - 控制存储器（CM，Control Memory）
- 功能：输入输出线之间的空间交换
- S 接线器所含 CM 数量等于入（出）线数
- 每个 CM 含有的存储单元个数等于入（出）线上的复用时隙数
- 每个存储单元为 m 位 bit，且满足$N \le 2^m$，其中 N 为接线器的入（出）线数
- CM 具有输入控制方式与输出控制方式。
  - 输入控制方式
    关于CM里面记得是什么：
    左侧的0~n-1是时隙的编号，如果按照老师说的是32路PCM，那么这里的n=32
    横着的是0-N-1，表示一共是N条入线（出线）
    因为是输入控制方式，格子里面填写的是出线的序号
    比如[30,3]=8,意思就是第三条入线的第30个时隙应该输出到第八条出线上，至于输出到第八条出线的哪个时隙上，因为S接线器不改变时隙，只改变空间，笔者认为应该是输出到第八条线的第30个时隙。
    ==这里还需要注意是是，CM中一共有N个**控制存储器**，而对于每个控制存储器，它的存储单元数目=n，而bit数=$\lceil log_2N \rceil$==
  ![2](https://api2.mubu.com/v3/document_image/c9abf0e6-4c2e-4b89-b229-d60f578513a3-16175743.jpg)
  - 输出控制方式 ==容易实现多播！==
  ![3](https://api2.mubu.com/v3/document_image/da1af8d1-5eab-4711-aa0a-66a8f8fb1039-16175743.jpg)
- 空间交换单元的基本特点：
  - 只完成空间交换，不进行时隙交换
  - 空间接线器按时分方式工作
  - 输<u>出</u>控制方式易于实现多播

>每秒钟抽样8000帧(???//这个哪来的？？？)，每一帧中有32个时隙，所以改变的周期是3.9$\mu s$
![image.png](https://api2.mubu.com/v3/document_image/397e2c45-52e4-49d0-b806-b83d572918e2-16175743.jpg)

#### 时间（时分）交换单元

这个玩意儿，其实只有一条线的输入和输出。
大家说的N路输入输出都是指的PCM，也就是说，本来就一个输入的口和输出的口，只是时隙不同。这一点非常重要，记住这个才可能理解后面的共享存储器和共享总线的工作机制。

##### 时分交换单元的一般构成

分为：共享存储器型交换单元、共享总线型交换单元。

共享存储器型：共 2N 个出入线缓存。

- 入线缓存控制读出
- 出线缓存控制写入

共享总线型：总线按照时隙轮流分配给入线控制部件和出线控制部件使用

$kNV=B/T$（N 为入线数、V 为入线速率、B 为每时隙传送比特数、T 为时隙长度，k 为时隙分配因子）

##### 时间接线器的构成

- T 接线器：共享存储器型SE
  - 话音存储器（SM，Speech Memory）：暂存话音的数字编码信息
    - 存储单元个数等于 PCM 线路每帧时隙数；每单元至少 8bit（一路话音）
  - 控制存储器（CM，Control Memory）
    - 存储单元个数等于 SM；每单元至少$log_2n（n 为时隙数）$比特
  - 这俩其实是形成了一个映射，假设是输出控制，那么顺序写入的数据被顺序存储到SM话音存储器中去，数组下标与到来顺序存在一一对应，而CM相当于存储了一个对应关系，把构造的一个新的帧的每个时隙都对应了一个输入时隙的下标，这样根据CM里面的信息就可以按照原来的帧构造一个仅时隙顺序不同的新帧然后发送。
  - 如果是输入控制，那么输出的顺序就是SM里面的信息，一毛一样的，相当于输入来的时候就在一边接收一边构造输出的新帧了，它是存的时候看着CM里面的信息存，这种CM刚好是上面那个输出控制的CM横纵坐标反过来。

![2](https://api2.mubu.com/v3/document_image/bddbe224-219d-48f5-b1c6-f3809af42395-16175743.jpg)

- 输出控制：顺序写入、控制读出
  - 前半周期写入，后半周期读出（SM）
  - 前半周期写入，后半周期读出（CM）
![2](https://api2.mubu.com/v3/document_image/2816def7-c845-4750-ab81-1219b03c1af8-16175743.jpg)

缺点：复用级别越高，对控制电路要求越高，无法达成很大规模；**时隙转换延迟不定**。

- 输入控制：
  - 前半周期读出，后半周期写入（SM）
  - 前半周期写入，后半周期读出（CM）
![2](https://api2.mubu.com/v3/document_image/59e893f8-d3c4-422a-8fa3-4a40bec1e83b-16175743.jpg)

### 交换网络

Def:交换网络是由（若干个）交换单元按照一定的拓扑结构拓展而成的。

分类:

- 单级交换网络：由一个或多个位于同一级交换单元构成的交换网络，信息从交换网络**入线到出线只经过一个交换单元**，并且**同一级多个交换单元入线和出线之间可建立连接（交换单元需要发挥交换作用而非直连,别管单极还是多级，这玩意儿得是个网络嗷）**。
- 多级（k 级）交换网络：
  如果一个交换网络中的交换单元可以分为K级，顺序明明为第1，2，...k级
  - 所有入线都只与第 1 级连接。
  - 所有第 1 级交换单元都只与入线和第 2 级连接。
  - 所有第 2 级交换单元都只与第 1 级和第 3 级连接。
  - 所有第 k 级交换单元都只与第 k-1 级和出线连接。
- 有阻塞网络、无阻塞网络：
  - 交换网络的阻塞是指从交换网络不同输入端来的信息在交换网络中交换时发生了**对同一公共资源争抢**的情况﹐这时在竞争资源中失败的信息就会被阻塞,直到这个公共资源被释放。
  - 内部竞争：同时要交换的两路信息同抢交换单元内部的通路资源。
  - 出线竞争：不同入端来的信息同时争抢交换网络同一个输出端口而发生的竞争。
  - 无阻塞网络
    - 严格无阻塞交换网络：任何时刻都可以在交换网络中建立一个连接（只要该连接起点、终点是空闲的）而不影响已建立的连接。（只要需要交换的入线与出线空闲，就可以通过交换网络建立一个连接。）
    - 可重排无阻塞网络：只要需要交换的入线与出线空闲，就可以通过交换网络直接地或对已有连接进行重排之后建立一个连接。
    - 广义无阻塞网络：存在一种精巧的选路方法，使得只要需要交换的入线与出线空闲，**不必重排**，就可以通过交换网络建立连接。
- 单通道网络、多通道网络：任一条入线和出线之间只存在唯一的一条通路，则为单通道网络。
  >对于2x2的交换网络，可以是两级的，也可以是三级的，三级交换网络的好处是：可以有多条通路，所以多接一级不是无意义的浪费。

### CLOS网络

严格无阻、可重排无阻公式和构造

![2](https://api2.mubu.com/v3/document_image/82fc201f-61fb-4d52-a654-36d6e70f6cd1-16175743.jpg)

3 级 CLOS 严格无阻：$m \geq 2n-1$

3 级 CLOS 可重排无阻：$m \geq n$

## chapter3-电路交换

## chapter4-分组交换

## chapter5-信令与协议

信令概念、NO7.信令系统&信令网

## chapter6-移动交换

GSM GFRS 3G 4G 5G

## chapter7-新一代融合网络交换（控制）技术

