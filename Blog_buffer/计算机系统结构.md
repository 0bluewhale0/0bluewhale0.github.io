---
title: 系统结构笔记
date: 2023-02-27 9:50:56
categories:
	- 笔记
		- 计算机系统结构
tags:
	- course
	- 计算机系统结构

cover: /img/Photo frame three-105065589.png
---

## 第一章 基础知识

### 1.1基本概念

计算机系统的**层次结构**
![0](https://api2.mubu.com/v3/document_image/ecbda4a7-2b0f-472e-b610-4b2f5c30f0d0-16175743.jpg)

**计算机系统结构**的定义：**计算机系统结构(Computer Architecture)的经典定义是1964 年Amdahl在介绍IBM360系统时提出的:计算机系统结构是指传统机器程序员所看到的计算机属性,即概念性结构与功能特性。**

**计算机组成**的定义：计算机组成(Computer Organization)指的是计算机系统结构的逻辑实现,包含物理机器级中的**数据流**和**控制流**的组成以及**逻辑设计**等。它着眼于物理机器级内各事件的排序方式与控制方式,各部件的功能以及各部件之间的联系。

**计算机实现**的定义：计算机实现(Computer Implementation)指的是计算机组成的物理实现,包括处理机、主存等部件的物理结构,器件的集成度和速度,模块、插件、底板的划分与连接,信号传输﹐电源、冷却及整机装配技术等。它着眼于器件技术和微组装技术,其中器件技术在实现技术中起主导作用。

举例辨析：

>(1)确定指令系统中是否有乘法指令属于计算机系统结构的内容,但乘法指令是用专门的乘法器实现,还是用加法器经多步操作来实现,属于计算机组成。而乘法器、加法器的物理实现﹐如器件的选定及所用的微组装技术等,属于计算机实现。
------
>(2）主存容量与编址方式(按位、按字节或按字访问等)的确定属于计算机系统结构。为了达到给定的性能价格比,主存速度应多快、逻辑结构是否采用多体交叉等属于计算机组成。而主存系统的物理实现,如器件的选定、逻辑电路的设计,微组装技术的使用等均属于计算机实现。

计算机系统结构的**分类**

- Flynn分类法：按照指令流和数据流的多倍性进行分类
  ![2](https://api2.mubu.com/v3/document_image/b0833a78-f9b2-495f-9a5f-983e9068cd19-16175743.jpg)
- 冯式分类法：用系统的最大并行度对计算机进行分类
  ![2](https://api2.mubu.com/v3/document_image/476313ef-9aea-4ae2-ba9a-9f3d3631d873-16175743.jpg)
- Handler分类法：把计算机的硬件结构分成三个层次，并分别考虑它们的可并行-流水处理程度，将计算机用3对整数表示。
  三个层次：
  ![3](https://api2.mubu.com/v3/document_image/571debbd-8e6a-438e-b164-4a04b9f182a8-16175743.jpg)
  ![4](https://api2.mubu.com/v3/document_image/02b74744-0f6b-4233-bc6e-0a944b726fdb-16175743.jpg)
  
![1](https://api2.mubu.com/v3/document_image/6D382E7290C141121677477905.jpg)

![1-2](https://api2.mubu.com/v3/document_image/1677489160735e4b7.jpg)

### 1.2 计算机系统的设计

#### 1.2.1 计算机系统设计的定量原理

##### 大概率事件优先原理

（又叫经常性事件原则）: 优先加速使用频率高的部件。

- 为获得明显的系统性能。对大概率 (经常性)事件，
赋予优先处理权和资源使用权。
- 加快处理频繁出现事件对系统的影响远比加速
处理很少出现事件的影响。

##### Amdahl定律

加快某部件执行速度所获得的系统性能(加速比)，与该部件在系统中总执行时间的比例（重要性）有关。
![2](https://api2.mubu.com/v3/document_image/493b86a0-5a70-47a5-af79-948f07288e1d-16175743.jpg)
![2](https://api2.mubu.com/v3/document_image/c5e48e51-0bd1-4572-818b-d3a120ee87d0-16175743.jpg)

加速比公式依赖于两个因素

1. 部件加速比 $S_e$
2. 可改进比例 $F_e$

##### 程序的局部性原理

- 程序的时间局部性
  - 程序即将用到的信息很可能就是目前正在使用的信息。
- 程序的空间局部
  - 程序即将用到的信息很可能与目前正在使用的信息在空间上相邻或者临近。

##### CPU性能公式

$$
CPU_{时间} = IC \times CPI \times t
$$
$$
= \sum (CPI_i \times IC_i)
$$

$IC$:执行程序的指令条数
$CPI$:指令的平均时钟周期数
其中，$t=\cfrac{1}{f}$

#### 1.2.2 计算机系统设计的主要内容

工作方面：

1. 需求分析
2. 软硬件功能划分： 经常使用的部分使用硬件加速
3. 前瞻性

### 1.2.3 系统设计的主要方法

1. top-down 设计
2. bottom-up 设计
3. middle-out 设计： 一般认为这个啥best的

### 1.3 计算机系统的性能评测

#### 指标

1. 执行时间
2. 速度
   - MIPS 每秒百万条指令数 million instructions per second
   - MFLOPS 每秒百万次浮点运算次数 million floating point operations per second

##### MIPS

$MIPS = I_{N} /(T_E \times 10^6)$
$=I_{N} /(I_{N} \times CPI \times t \times 10^6)$
$=1 / (CPI \times 10^6)$

$I_{N}$: 程序中的指令总数
$T_E$:执行程序的时间

只适用于评估标量计算机，对于并行计算的机器不能很好的评价。

##### MFLOPS

$MFLOPS = I_{FN} /(T_E \times 10^6)$

$I_{FN}$: 程序中的浮点运算次数
$T_E$:执行程序的时间

一般大型机都用MFLOPS来衡量计算机的速度，因为他不依赖于指令系统，与编译系统没有太大关系。

#### 测试程序

1. real程序
2. 核心程序
3. 小测试程序
4. 综合测试程序

性能比较：

- 平均执行时间
- 加权平均
- 调和平均（？ $H_m$ 用于计算速度的
  $$
  H_m=\cfrac{n}{\sum_{i=1}^{n} \cfrac{1}{R_i}}
  = \cfrac{n}{\sum_{i=1}^{n} T_i}
  $$
- 几何平均（ $G_m$ 这个也是用来算速度的
  - 普通几何平均
	$$
	G_m = \sqrt[n]{\prod_{i=1}^n R_i}
	= \sqrt[n]{\prod_{i=1}^n \cfrac{1}{T_i}}
	$$
  - 加权几何平均
		$$
		G_m = \prod_{i=1}^n (R_i)^{W_i}
		$$

### 1.4 计算机系统结构的发展

#### 1.4.1 冯诺依曼结构

- ALU为中心
- 指令和数据被存储器认为是一样的玩意儿
- 存储器编码方式是一维的
- 指令由OP和ADDR组成，而且顺序执行

改进：

- 并行处理
- 指令系统系统的精简：CISC->RISC的转变，使CPI得到了很大的提高
- 输入输出方式的改进

#### 1.4.2 软件对系统结构的影响

软件可移植的ways：

- 统一的高级语言：理想情况下的最方便的办法
- 系列机：就一个厂家生产的具有相同的系统结构，但是不同的组成/实现的机器，比如intel？？？
	系列机又称兼容机，兼容包括：
	- 向上兼容：上下是指的机器的档次
	- 向下兼容
	- 向前兼容：前后指的是机器的版次
	- 向后兼容
	**向后兼容是系列机的** ==根本特征==
	![2](https://api2.mubu.com/v3/document_image/4612839b-f01f-4194-8db1-f603cf6f3573-16175743.jpg)

- 模拟与仿真
  - 模拟：用软件方法中一台现有的机器上实现另一个机器的指令集，就是虚拟机
  - 仿真：用**微程序** 在一台现有机器上实现另一台机器的指令集
    - 仿真只能在俩结构差别不大的机子之间使用，但是它快一点

#### 1.4.3 器件发展对系统结构的影响

第几代计算机上按照 **器件** 来划分的

#### 1.4.4 应用对系统结构的影响

应用需求上促使计算机系统结构发展的**最根本的动力**
（需求带动发展）

专用性 和 通用性

### 1.5 计算机系统结构中并行性的发展

并行等级的发展：

- 字串位串
- 字串位并：同时对一个字的全部位进行操作
- 字并位串：对许多字的同一位 ，位片
- 全并行：同时对 许多字的 全部/部分位进行处理，是最高一级的并行

### 补充：Words

- CPI: clocks per instruction
- IC: instruction counts
- MIPS million instructions per second
- MFLOPS million floating point operations per second
- CISC 复杂指令集计算机
- RISC 精简指令集计算机
